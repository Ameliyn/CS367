
long scale(long x, long y, long z){
     long t = x + 4 * y + 12 * z;
     return t;
}
This is unoptimized assembly gives:

{
	.globl scale
scale:
	xor %rax, %rax
	add %rdi, %rax

	mov %rsi, %r10
	imul $0x4,%r10
	add %r10, %rax

	mov %rdx, %r11
	imul $0xc, %r11
	add %r11, %rax

	ret
}

long f(long a[10], int i){
     return a[i];
}

{
	.globl f
f:
	imul $8, %rsi
	add %rsi, %rdi
	mov (%rsi), %rax
	ret
}
Optimizing the above returns:
{
	.globl f
f:
	mov (%rdi, %rsi, 8), %rax
	ret
}
